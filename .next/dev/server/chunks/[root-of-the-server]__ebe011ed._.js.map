{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///D:/ReactPractice/sivanto/src/app/api/sendEmail/route.ts"],"sourcesContent":["// app/api/sendEmail/route.ts\r\nimport nodemailer from \"nodemailer\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const { formType, ...formFields } = body; // all fields dynamically\r\n\r\n    const transporter = nodemailer.createTransport({\r\n      host: process.env.SMTP_HOST,\r\n      port: Number(process.env.SMTP_PORT),\r\n      secure: process.env.SMTP_PORT === \"465\",\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS\r\n      }\r\n    });\r\n\r\n    // Dynamic subject\r\n    const subjectMap: Record<string, string> = {\r\n      \"form1\": `Loan Form Submission`,\r\n      \"form2\": `Quick Contact Form Submission`,\r\n      \"form3\": `Another Loan Form`,\r\n      \"form4\": `Detailed Loan/Query Form`\r\n    };\r\n    const subject = subjectMap[formType] || \"Form Submission\";\r\n\r\n    // Build email body dynamically\r\n    let htmlBody = \"<h3>Form Submission</h3>\";\r\n    let textBody = \"Form Submission:\\n\\n\";\r\n    for (const key in formFields) {\r\n      htmlBody += `<p><strong>${key}:</strong> ${formFields[key] || \"N/A\"}</p>`;\r\n      textBody += `${key}: ${formFields[key] || \"N/A\"}\\n`;\r\n    }\r\n\r\n    await transporter.sendMail({\r\n      from: `\"${formFields.name || \"No Name\"}\" <${process.env.EMAIL_USER}>`,\r\n      to: `${process.env.EMAIL_USER}, sivantocapital@gmail.com`,\r\n      subject,\r\n      text: textBody,\r\n      html: htmlBody\r\n    });\r\n\r\n    return new Response(JSON.stringify({ success: true }), { status: 200 });\r\n  } catch (err) {\r\n    console.error(err);\r\n    return new Response(JSON.stringify({ success: false, error: err }), { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,6BAA6B;AAC7B;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,QAAQ,EAAE,GAAG,YAAY,GAAG,MAAM,yBAAyB;QAEnE,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;YAC7C,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS;YAClC,QAAQ,QAAQ,GAAG,CAAC,SAAS,KAAK;YAClC,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC9B;QACF;QAEA,kBAAkB;QAClB,MAAM,aAAqC;YACzC,SAAS,CAAC,oBAAoB,CAAC;YAC/B,SAAS,CAAC,6BAA6B,CAAC;YACxC,SAAS,CAAC,iBAAiB,CAAC;YAC5B,SAAS,CAAC,wBAAwB,CAAC;QACrC;QACA,MAAM,UAAU,UAAU,CAAC,SAAS,IAAI;QAExC,+BAA+B;QAC/B,IAAI,WAAW;QACf,IAAI,WAAW;QACf,IAAK,MAAM,OAAO,WAAY;YAC5B,YAAY,CAAC,WAAW,EAAE,IAAI,WAAW,EAAE,UAAU,CAAC,IAAI,IAAI,MAAM,IAAI,CAAC;YACzE,YAAY,GAAG,IAAI,EAAE,EAAE,UAAU,CAAC,IAAI,IAAI,MAAM,EAAE,CAAC;QACrD;QAEA,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,CAAC,CAAC,EAAE,WAAW,IAAI,IAAI,UAAU,GAAG,EAAE,QAAQ,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;YACrE,IAAI,GAAG,QAAQ,GAAG,CAAC,UAAU,CAAC,0BAA0B,CAAC;YACzD;YACA,MAAM;YACN,MAAM;QACR;QAEA,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;QAAK,IAAI;YAAE,QAAQ;QAAI;IACvE,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;YAAO,OAAO;QAAI,IAAI;YAAE,QAAQ;QAAI;IACpF;AACF"}}]
}